<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/aframe-logo-192.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GDM Demo</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nunjucks/2.3.0/nunjucks.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #FAFAFA">
      <a-assets>
        <a-asset-item id="island" src="models/island.gltf"></a-asset-item>
        <a-asset-item id="bandStand" src="models/bandstand.glb"></a-asset-item>
        <script id="bands" type="text/x-nunjucks-template">
          {% for x in range(0, 10) %}
              <a-entity gltf-model="#bandStand" scale="5 5 5"></a-entity>
            {% endfor %}
        </script>
      </a-assets>
      <a-entity id="island" 
        gltf-model="models/island.gltf" 
        position="4.59 -6.76 1.02"
        animation="startEvent:hideIsland; property:position; to:4.59 -100 1.02; easing:easeInCubic; autoplay:false"
        animation="startEvent:showIsland; property:position; to:4.59 -6.76 1.02; easing:easeInCubic; autoplay:false"
        ></a-entity>
      <a-entity id="bands" 
        template="src: #bands" 
        layout="type: circle; radius: 32; plane: xz" 
        rotation="0 89.367 0" 
        position="0 15 0"
        animation="startEvent:showBands;property:position; to:0 1 0; easing:easeOutCubic; autoplay:false"
        animation="startEvent:hideBands;property:position; to:0 15 0; easing:easeOutCubic; autoplay:false"
        ></a-entity>
      <a-entity id="arena" 
        gltf-model="models/arena.gltf" 
        position="0 0.47 -40.31"
        >
        <a-plane 
          class="hyperbeam collidable" 
          position="0 8.60417 4.70419" 
          rotation="20.480949344746406 179.9998479605043 0" 
          width="16" 
          height="9" 
          color="#000000" 
          sound="autoplay: true; refDistance: 0.2; rolloffFactor: 3" 
          hyperbeam="" 
          scale="0.5 0.5 0.5"></a-plane>
      </a-entity>
      <a-camera cursor="rayOrigin: mouse" raycaster="objects: .collidable" reverse-mouse-drag="true"></a-camera>
      <a-entity id="sky" environment="ground:none;"></a-entity>
    </a-scene>
    <script type="module" src="/main.js"></script>
  </body>
</html>