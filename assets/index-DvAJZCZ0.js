(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();const y="modulepreload",E=function(c){return"/gdm-demo/"+c},f={},g=function(a,l,i){let t=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));t=Promise.all(l.map(n=>{if(n=E(n),n in f)return;f[n]=!0;const d=n.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${h}`))return;const s=document.createElement("link");if(s.rel=d?"stylesheet":y,d||(s.as="script",s.crossOrigin=""),s.href=n,o&&s.setAttribute("nonce",o),document.head.appendChild(s),d)return new Promise((r,u)=>{s.addEventListener("load",r),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${n}`)))})}))}return t.then(()=>a()).catch(e=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=e,window.dispatchEvent(o),!o.defaultPrevented)throw e})},w=g(()=>import("./index-Cgoq1aYX.js"),[]);AFRAME.registerComponent("hyperbeam",{async init(){const c=this.el.getObject3D("mesh").geometry,{width:a,height:l}=c.parameters;navigator.userAgent.includes("Firefox")||(c.rotateZ(Math.PI),c.rotateY(Math.PI));const i=new THREE.Texture,t=this.el.sceneEl.renderer,e=new THREE.MeshBasicMaterial({map:i});e.side=THREE.DoubleSide;const o=new THREE.Mesh(c,e);this.el.setObject3D("mesh",o);let n="";if(n===""){const r=location.pathname.substring(1),p=await fetch("https://engine.hyperbeam.com/v0/vm",{method:"POST",headers:{Authorization:"Bearer sk_test__v-H_30aF7_jV9_EDtXe6yGQGA1J5Ie0TTzCiEcmYxg","Content-Type":"application/json",mode:"no-cors"},body:`{
                    "start_url":"https://leadxp.fr",
                    "kiosk":true,
                    "ublock":true,
                    "webgl":true,
                    "hide_cursor":true,
                }`});if(p.status>=400){alert("We are out of demo servers! Visit hyperbeam.dev to get your own API key");return}const m=await p.json();m.room!==r&&history.replaceState(null,null,"/"+m.room+location.search),n=m.url}const d=(await w).default,h=await d(hbcontainer,n,{frameCb:r=>{i.image?t.copyTextureToTexture(new THREE.Vector2(0,0),new THREE.Texture(r),i):(r.constructor===HTMLVideoElement&&(r.width=r.videoWidth,r.height=r.videoHeight),i.image=r,i.needsUpdate=!0)},audioTrackCb:r=>{audio.srcObject=new MediaStream([r]),this.el.addEventListener("sound-loaded",()=>{this.el.components.sound.playSound()})}}),s=r=>{const u=new THREE.Vector3().copy(r.detail.intersection.point);o.worldToLocal(u),h.sendEvent({type:r.type,x:u.x/a+.5,y:-u.y/l+.5,button:0})};this.el.addEventListener("mousedown",s),this.el.addEventListener("mouseup",s),window.addEventListener("wheel",r=>{this.el.is("cursor-hovered")&&h.sendEvent({type:"wheel",deltaY:r.deltaY})})}});
