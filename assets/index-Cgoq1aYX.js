let ye,d,z;try{ye=new TextDecoder}catch{}let n=0;const lt=57342,dt=57343,Ne=57337,$={};let k,le,R,L,S,_,X,c={},de=0,Y=0,E=[],we=[],De={useRecords:!1,mapsAsObjects:!0},G=!1,qe=2;try{new Function("")}catch{qe=1/0}class ue{constructor(t){if(t&&(!t.keyMap&&!t._keyMap||t.useRecords||(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[r,a]of Object.entries(t.keyMap))this.mapKey.set(a,r)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let r=new Map;for(let[a,s]of Object.entries(t))r.set(this._keyMap.hasOwnProperty(a)?this._keyMap[a]:a,s);return r}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[a,s]of Object.entries(this._keyMap))this._mapKey.set(s,a)}let r={};return t.forEach((a,s)=>r[T(this._mapKey.has(s)?this._mapKey.get(s):s)]=a),r}mapDecode(t,r){let a=this.decode(t);return this._keyMap&&a.constructor.name==="Array"?a.map(s=>this.decodeKeys(s)):a}decode(t,r){if(d)return Xe(()=>(ve(),this?this.decode(t,r):ue.prototype.decode.call(De,t,r)));z=r>-1?r:t.length,n=0,Y=0,le=null,R=null,d=t;try{_=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(a){throw d=null,t instanceof Uint8Array?a:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof ue){if(c=this,S=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return k=this.structures,se();(!k||k.length>0)&&(k=[])}else c=De,(!k||k.length>0)&&(k=[]),S=null;return se()}decodeMultiple(t,r){let a,s=0;try{let o=t.length;G=!0;let l=this?this.decode(t,o):Ee.decode(t,o);if(!r){for(a=[l];n<o;)s=n,a.push(se());return a}if(r(l)===!1)return;for(;n<o;)if(s=n,r(se())===!1)return}catch(o){throw o.lastPosition=s,o.values=a,o}finally{G=!1,ve()}}}function se(){try{let e=f();if(R){if(n>=R.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}n=R.postBundlePosition,R=null}if(n==z)k=null,d=null,L&&(L=null);else{if(n>z){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}if(!G)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw ve(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function f(){let e=d[n++],t=e>>5;if(e&=31,e>23)switch(e){case 24:e=d[n++];break;case 25:if(t==7)return function(){let a=d[n++],s=d[n++],o=(127&a)>>2;if(o===31)return s||3&a?NaN:128&a?-1/0:1/0;if(o===0){let l=((3&a)<<8|s)/16777216;return 128&a?-l:l}return ie[3]=128&a|56+(o>>1),ie[2]=(7&a)<<5|s>>3,ie[1]=s<<5,ie[0]=0,We[0]}();e=_.getUint16(n),n+=2;break;case 26:if(t==7){let a=_.getFloat32(n);if(c.useFloat32>2){let s=Ye[(127&d[n])<<1|d[n+1]>>7];return n+=4,(s*a+(a>0?.5:-.5)>>0)/s}return n+=4,a}e=_.getUint32(n),n+=4;break;case 27:if(t==7){let a=_.getFloat64(n);return n+=8,a}if(t>1){if(_.getUint32(n)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=_.getUint32(n+4)}else c.int64AsNumber?(e=4294967296*_.getUint32(n),e+=_.getUint32(n+4)):e=_.getBigUint64(n);n+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let a,s=[],o=0;for(;(a=f())!=$;)s[o++]=a;return t==4?s:t==3?s.join(""):Buffer.concat(s);case 5:let l;if(c.mapsAsObjects){let u={};if(c.keyMap)for(;(l=f())!=$;)u[T(c.decodeKey(l))]=f();else for(;(l=f())!=$;)u[T(l)]=f();return u}{X&&(c.mapsAsObjects=!0,X=!1);let u=new Map;if(c.keyMap)for(;(l=f())!=$;)u.set(c.decodeKey(l),f());else for(;(l=f())!=$;)u.set(l,f());return u}case 7:return $;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return r=e,c.copyBuffers?Uint8Array.prototype.slice.call(d,n,n+=r):d.subarray(n,n+=r);case 3:if(Y>=n)return le.slice(n-de,(n+=e)-de);if(Y==0&&z<140&&e<32){let o=e<16?Je(e):function(l){let u=n,y=new Array(l);for(let h=0;h<l;h++){const w=d[n++];if((128&w)>0)return void(n=u);y[h]=w}return O.apply(String,y)}(e);if(o!=null)return o}return ut(e);case 4:let a=new Array(e);for(let o=0;o<e;o++)a[o]=f();return a;case 5:if(c.mapsAsObjects){let o={};if(c.keyMap)for(let l=0;l<e;l++)o[T(c.decodeKey(f()))]=f();else for(let l=0;l<e;l++)o[T(f())]=f();return o}{X&&(c.mapsAsObjects=!0,X=!1);let o=new Map;if(c.keyMap)for(let l=0;l<e;l++)o.set(c.decodeKey(f()),f());else for(let l=0;l<e;l++)o.set(f(),f());return o}case 6:if(e>=Ne){let o=k[8191&e];if(o)return o.read||(o.read=me(o)),o.read();if(e<65536){if(e==dt){let l=q(),u=f(),y=f();be(u,y);let h={};if(c.keyMap)for(let w=2;w<l;w++)h[T(c.decodeKey(y[w-2]))]=f();else for(let w=2;w<l;w++)h[T(y[w-2])]=f();return h}if(e==lt){let l=q(),u=f();for(let y=2;y<l;y++)be(u++,f());return f()}if(e==Ne)return function(){let l=q(),u=n+f();for(let h=2;h<l;h++){let w=q();n+=w}let y=n;return n=u,R=[ge(q()),ge(q())],R.position0=0,R.position1=0,R.postBundlePosition=n,n=y,f()}();if(c.getShared&&(ke(),o=k[8191&e],o))return o.read||(o.read=me(o)),o.read()}}let s=E[e];if(s)return s.handlesRead?s(f):s(f());{let o=f();for(let l=0;l<we.length;l++){let u=we[l](e,o);if(u!==void 0)return u}return new ce(o,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let o=(S||Z())[e];if(o!==void 0)return o;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let o=new Error("Unexpected end of CBOR data");throw o.incomplete=!0,o}throw new Error("Unknown CBOR token "+e)}var r}const Ve=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function me(e){return e.slowReads=0,function(){let t=d[n++];if(t&=31,t>23)switch(t){case 24:t=d[n++];break;case 25:t=_.getUint16(n),n+=2;break;case 26:t=_.getUint32(n),n+=4;break;default:throw new Error("Expected array header, but got "+d[n-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===t)return r(f);r=r.next}if(this.slowReads++>=qe){let s=this.length==t?this:this.slice(0,t);return r=c.keyMap?new Function("r","return {"+s.map(o=>c.decodeKey(o)).map(o=>Ve.test(o)?T(o)+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}"):new Function("r","return {"+s.map(o=>Ve.test(o)?T(o)+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=t,this.compiledReader=r,r(f)}let a={};if(c.keyMap)for(let s=0;s<t;s++)a[T(c.decodeKey(this[s]))]=f();else for(let s=0;s<t;s++)a[T(this[s])]=f();return a}}function T(e){if(typeof e=="string")return e==="__proto__"?"__proto_":e;if(typeof e!="object")return e.toString();throw new Error("Invalid property name type "+typeof e)}let ut=ge;function ge(e){let t;if(e<16&&(t=Je(e)))return t;if(e>64&&ye)return ye.decode(d.subarray(n,n+=e));const r=n+e,a=[];for(t="";n<r;){const s=d[n++];if(!(128&s))a.push(s);else if((224&s)==192){const o=63&d[n++];a.push((31&s)<<6|o)}else if((240&s)==224){const o=63&d[n++],l=63&d[n++];a.push((31&s)<<12|o<<6|l)}else if((248&s)==240){let o=(7&s)<<18|(63&d[n++])<<12|(63&d[n++])<<6|63&d[n++];o>65535&&(o-=65536,a.push(o>>>10&1023|55296),o=56320|1023&o),a.push(o)}else a.push(s);a.length>=4096&&(t+=O.apply(String,a),a.length=0)}return a.length>0&&(t+=O.apply(String,a)),t}let O=String.fromCharCode;function Je(e){if(e<4){if(e<2){if(e===0)return"";{let t=d[n++];return(128&t)>1?void(n-=1):O(t)}}{let t=d[n++],r=d[n++];if((128&t)>0||(128&r)>0)return void(n-=2);if(e<3)return O(t,r);let a=d[n++];return(128&a)>0?void(n-=3):O(t,r,a)}}{let t=d[n++],r=d[n++],a=d[n++],s=d[n++];if((128&t)>0||(128&r)>0||(128&a)>0||(128&s)>0)return void(n-=4);if(e<6){if(e===4)return O(t,r,a,s);{let o=d[n++];return(128&o)>0?void(n-=5):O(t,r,a,s,o)}}if(e<8){let o=d[n++],l=d[n++];if((128&o)>0||(128&l)>0)return void(n-=6);if(e<7)return O(t,r,a,s,o,l);let u=d[n++];return(128&u)>0?void(n-=7):O(t,r,a,s,o,l,u)}{let o=d[n++],l=d[n++],u=d[n++],y=d[n++];if((128&o)>0||(128&l)>0||(128&u)>0||(128&y)>0)return void(n-=8);if(e<10){if(e===8)return O(t,r,a,s,o,l,u,y);{let h=d[n++];return(128&h)>0?void(n-=9):O(t,r,a,s,o,l,u,y,h)}}if(e<12){let h=d[n++],w=d[n++];if((128&h)>0||(128&w)>0)return void(n-=10);if(e<11)return O(t,r,a,s,o,l,u,y,h,w);let A=d[n++];return(128&A)>0?void(n-=11):O(t,r,a,s,o,l,u,y,h,w,A)}{let h=d[n++],w=d[n++],A=d[n++],P=d[n++];if((128&h)>0||(128&w)>0||(128&A)>0||(128&P)>0)return void(n-=12);if(e<14){if(e===12)return O(t,r,a,s,o,l,u,y,h,w,A,P);{let C=d[n++];return(128&C)>0?void(n-=13):O(t,r,a,s,o,l,u,y,h,w,A,P,C)}}{let C=d[n++],F=d[n++];if((128&C)>0||(128&F)>0)return void(n-=14);if(e<15)return O(t,r,a,s,o,l,u,y,h,w,A,P,C,F);let M=d[n++];return(128&M)>0?void(n-=15):O(t,r,a,s,o,l,u,y,h,w,A,P,C,F,M)}}}}}let We=new Float32Array(1),ie=new Uint8Array(We.buffer,0,4);new Array(4096);class ce{constructor(t,r){this.value=t,this.tag=r}}E[0]=e=>new Date(e),E[1]=e=>new Date(Math.round(1e3*e)),E[2]=e=>{let t=BigInt(0);for(let r=0,a=e.byteLength;r<a;r++)t=BigInt(e[r])+t<<BigInt(8);return t},E[3]=e=>BigInt(-1)-E[2](e),E[4]=e=>+(e[1]+"e"+e[0]),E[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const be=(e,t)=>{let r=k[e-=57344];r&&r.isShared&&((k.restoreStructures||(k.restoreStructures=[]))[e]=r),k[e]=t,t.read=me(t)};E[105]=e=>{let t=e.length,r=e[1];be(e[0],r);let a={};for(let s=2;s<t;s++)a[T(r[s-2])]=e[s];return a},E[14]=e=>R?R[0].slice(R.position0,R.position0+=e):new ce(e,14),E[15]=e=>R?R[1].slice(R.position1,R.position1+=e):new ce(e,15);let ct={Error,RegExp};E[27]=e=>(ct[e[0]]||Error)(e[1],e[2]);const Ze=e=>{if(d[n++]!=132){let r=new Error("Packed values structure must be followed by a 4 element array");throw d.length<n&&(r.incomplete=!0),r}let t=e();if(!t||!t.length){let r=new Error("Packed values structure must be followed by a 4 element array");throw r.incomplete=!0,r}return S=S?t.concat(S.slice(t.length)):t,S.prefixes=e(),S.suffixes=e(),e()};function H(e,t){return typeof e=="string"?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function Z(){if(!S){if(!c.getShared)throw new Error("No packed values available");ke()}return S}Ze.handlesRead=!0,E[51]=Ze,E[6]=e=>{if(!S){if(!c.getShared)return new ce(e,6);ke()}if(typeof e=="number")return S[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");throw e===void 0&&(t.incomplete=!0),t},E[28]=e=>{L||(L=new Map,L.id=0);let t,r=L.id++;t=d[n]>>5==4?[]:{};let a={target:t};L.set(r,a);let s=e();return a.used?Object.assign(t,s):(a.target=s,s)},E[28].handlesRead=!0,E[29]=e=>{let t=L.get(e);return t.used=!0,t.target},E[258]=e=>new Set(e),(E[259]=e=>(c.mapsAsObjects&&(c.mapsAsObjects=!1,X=!0),e())).handlesRead=!0,we.push((e,t)=>e>=225&&e<=255?H(Z().prefixes[e-224],t):e>=28704&&e<=32767?H(Z().prefixes[e-28672],t):e>=1879052288&&e<=2147483647?H(Z().prefixes[e-1879048192],t):e>=216&&e<=223?H(t,Z().suffixes[e-216]):e>=27647&&e<=28671?H(t,Z().suffixes[e-27639]):e>=1811940352&&e<=1879048191?H(t,Z().suffixes[e-1811939328]):e==1399353956?{packedValues:S,structures:k.slice(0),version:t}:e==55799?t:void 0);const ft=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,ze=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],pt=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<ze.length;e++)ht(ze[e],pt[e]);function ht(e,t){let r,a="get"+e.name.slice(0,-5);typeof e=="function"?r=e.BYTES_PER_ELEMENT:e=null;for(let s=0;s<2;s++){if(!s&&r==1)continue;let o=r==2?1:r==4?2:3;E[s?t:t-4]=r==1||s==ft?l=>{if(!e)throw new Error("Could not find typed array for code "+t);return c.copyBuffers||r!==1&&(r!==2||1&l.byteOffset)&&(r!==4||3&l.byteOffset)&&(r!==8||7&l.byteOffset)?new e(Uint8Array.prototype.slice.call(l,0).buffer):new e(l.buffer,l.byteOffset,l.byteLength)}:l=>{if(!e)throw new Error("Could not find typed array for code "+t);let u=new DataView(l.buffer,l.byteOffset,l.byteLength),y=l.length>>o,h=new e(y),w=u[a];for(let A=0;A<y;A++)h[A]=w.call(u,A<<o,s);return h}}}function q(){let e=31&d[n++];if(e>23)switch(e){case 24:e=d[n++];break;case 25:e=_.getUint16(n),n+=2;break;case 26:e=_.getUint32(n),n+=4}return e}function ke(){if(c.getShared){let e=Xe(()=>(d=null,c.getShared()))||{},t=e.structures||[];c.sharedVersion=e.version,S=c.sharedValues=e.packedValues,k===!0?c.structures=k=t:k.splice.apply(k,[0,t.length].concat(t))}}function Xe(e){let t=z,r=n,a=de,s=Y,o=le,l=L,u=R,y=new Uint8Array(d.slice(0,z)),h=k,w=c,A=G,P=e();return z=t,n=r,de=a,Y=s,le=o,L=l,R=u,d=y,G=A,k=h,c=w,_=new DataView(d.buffer,d.byteOffset,d.byteLength),P}function ve(){d=null,L=null,k=null}const Ye=new Array(147);for(let e=0;e<256;e++)Ye[e]=+("1e"+Math.floor(45.15-.30103*e));let Ee=new ue({useRecords:!1});const yt=Ee.decode;Ee.decodeMultiple;class Ae extends Error{constructor(t){super(t),this.name="FailedToLoadError"}}class $e extends Ae{constructor(t){super(t),this.name="SessionTerminatedError"}}const He="Provided Hyperbeam embed_url's session has terminated";class wt extends Ae{constructor(t){super(t),this.name="OfflineError"}}class W extends Error{constructor(){super("Timed out"),this.name="TimedOutError"}}async function mt(e,t,r){var a;const s=(r==null?void 0:r.timeout)||5e3,o=r==null?void 0:r.shotCb,l=r==null?void 0:r.onDisconnect,u=r==null?void 0:r.onCloseWarning,y=r==null?void 0:r.onCursor,h=r==null?void 0:r.webhookUserdata,w=r==null?void 0:r.onConnectionStateChange,A=r==null?void 0:r.cn,P=A||"jquery.tutturu.workers.dev";let C,F,M,fe,pe=(r==null?void 0:r.delegateKeyboard)!==!1;const Me=/^https:\/\/[a-z0-9]{25}\.hyperbeam\.com\//.test(t),Q=Me?3:2;let N=0;const Ue=()=>{t="https://"+P+t.substring(t.indexOf("/")+1)},Re=()=>!A&&Me&&N===Q?(Ue(),s):s/N;let ee;function te(){M({type:"blur"})}A&&Ue();const K={},j=new Map,D=new Map;function Oe(){F?(fe==null||fe(),ee&&URL.revokeObjectURL(ee)):(window.removeEventListener("message",je),window.removeEventListener("keydown",re),window.removeEventListener("keyup",re),window.removeEventListener("pagehide",te),window.removeEventListener("blur",te)),j.clear(),D.clear()}let _e,Se,Te;if(e.nodeName==="IFRAME"){if(r!=null&&r.frameCb)throw new TypeError("frameCb is not supported with IFrame for performance reasons, please pass in a div");if(r!=null&&r.audioTrackCb||r!=null&&r.videoTrackCb)throw new TypeError("track cb cannot be used with IFrame, please pass in a div");e.allow="autoplay; clipboard-read; clipboard-write",await new Promise((i,p)=>{let v;const U=()=>{N++,v=setTimeout(g,Re()),e.src=t},g=()=>{N===Q?p(new W):U()};U(),e.addEventListener("load",()=>{clearTimeout(v),i()},{once:!0}),fetch(t).then(b=>{b.status===400&&p(new $e(He))}).catch(()=>{N<Q&&(clearTimeout(v),U())})}),C=e.contentWindow,M=i=>{C.postMessage(i,"*")},window.addEventListener("message",je),window.addEventListener("keydown",re,{passive:!0}),window.addEventListener("keyup",re,{passive:!0}),window.addEventListener("pagehide",te),window.addEventListener("blur",te)}else{if(r!=null&&r.frameCb&&(r!=null&&r.videoTrackCb))throw new TypeError("please set exactly one of frameCb and videoTrackCb");F=e.shadowRoot||e.attachShadow({mode:"open"});const i=await new Promise(async(v,U)=>{for(;;){N++;const g=new AbortController;setTimeout(()=>g.abort(),Re());const b=new URL(t);b.searchParams.append("no_cbor","1");try{const x=await fetch(b.toString(),{signal:g.signal});if(x.status===504)throw new Error;return void v(x)}catch(x){if(!navigator.onLine)return void U(new wt("Network is offline"));if(N===Q)return void U(x.name==="AbortError"?new W:new Ae("Failed to load, please check if the Hyperbeam embed_url's session has terminated"))}}});if(i.status>=400)throw new $e(He);ee=URL.createObjectURL(await i.blob());const p=(await import(ee)).default(F,i.url,Be,{...r,cborDecode:yt});M=p.handleMessage,fe=p.destroy}h&&M({type:"webhook_auth",data:{webhookUserdata:h}});const xe=await new Promise((i,p)=>{Te=i,Se=setTimeout(()=>{Oe(),p(new W)},s)});let{width:Le,height:Ce}=xe;const{user_id:Pe,max_area:he}=xe;function Ke(){for(var i=0;;i++)if(!(i in K)&&!j.has(i))return i}async function je(i){i.source===C&&Be(i.data)}async function Be(i){var p;if("i"in i&&!("m"in i)){const{i:v}=i,U=K[v];if(U){clearTimeout(U[2]),delete K[v];const{e:g}=i;g!=null?U[1](new Error(g)):U[0](i.r)}else{const g=j.get(v);if(g){const{r:b}=i;Array.isArray(b)?g[1](...b):g[1](b)}}}else if("type"in i)switch(i.type){case"connection":clearTimeout(Se),Te(i.data);break;case"ext_reconn":{const v=new Set;for(const[U,[g,b,x]]of j)g&&!v.has(b)&&(j.delete(U),D.delete(b),v.add(b),g(b,...x));break}case"blur":(p=document.activeElement)===null||p===void 0||p.blur();break;case"screenshot":{const{mime:v,buf:U,tabId:g}=i.data;o&&o({tabId:g,img:new Blob([U],{type:v})});break}case"disconnect":l&&l(i.data);break;case"close_warning":u&&u(i.data);break;case"connection_state":w&&w(i.data);break;case"peer_mouse":y&&y(i.data);break;case"resize":Le=i.data.width,Ce=i.data.height;break;case"rtt":_e=i.data}}function re(i){if(!pe)return;const{activeElement:p}=document;p&&(p.nodeName==="INPUT"||p.nodeName==="TEXTAREA"||p.isContentEditable)||M({type:i.type,key:i.key,ctrlKey:i.ctrlKey,metaKey:i.metaKey})}const Ie=(i,p)=>new Promise((v,U)=>{const g=Ke(),b=setTimeout(()=>{const x=K[g];delete K[g],x[1](new W)},s);K[g]=[v,U,b],M({m:i,a:p,i:g,t:I})}),m=i=>(...p)=>Ie(i,p),B=(i,p=!0)=>{const v=`${i}.addListener`,U=`${i}.removeListener`;return{addListener:async function g(b,...x){if(D.has(b))throw new Error("Can't bind same callback twice");return new Promise((ot,at)=>{const V=Ke(),st=setTimeout(()=>{const it=K[V];delete K[V],j.delete(V),D.delete(b),it[1](new W)},s);K[V]=[ot,at,st],j.set(V,[p?g:void 0,b,x]),D.set(b,V),M({m:v,a:x,i:V})})},async removeListener(g){const b=D.get(g);b!=null&&(await Ie(U,[b]),j.delete(b),D.delete(g))}}},Ge=m("resize"),Qe=m("setPermissions"),et=m("addRoles"),tt=m("removeRoles"),rt=m("enablePrivacyMode"),nt=m("disablePrivacyMode");let I=r==null?void 0:r.adminToken,Fe=(r==null?void 0:r.disableInput)===!0,ne=(r==null?void 0:r.playoutDelay)===!0,oe=(r==null?void 0:r.videoPaused)===!0,ae=(a=r==null?void 0:r.volume)!==null&&a!==void 0?a:1;const J={get height(){return Ce},maxArea:he,get rtt(){return _e},userId:Pe,get width(){return Le},get adminToken(){return I},set adminToken(i){I=i,M({type:"admin_token",data:i})},get delegateKeyboard(){return pe},set delegateKeyboard(i){pe=i,M({type:"delegate_keyboard",data:i})},get disableInput(){return Fe},set disableInput(i){Fe=i,M({type:"disable_input",data:i})},get playoutDelay(){return ne},set playoutDelay(i){ne=i,M({type:"playout_delay",data:i})},screenshot:m("screenshot"),tabs:{create:m("tabs.create"),detectLanguage:m("tabs.detectLanguage"),discard:m("tabs.discard"),duplicate:m("tabs.duplicate"),get:m("tabs.get"),getZoom:m("tabs.getZoom"),getZoomSettings:m("tabs.getZoomSettings"),goBack:m("tabs.goBack"),goForward:m("tabs.goForward"),group:m("tabs.group"),highlight:m("tabs.highlight"),move:m("tabs.move"),query:m("tabs.query"),reload:m("tabs.reload"),remove:m("tabs.remove"),setZoom:m("tabs.setZoom"),setZoomSettings:m("tabs.setZoomSettings"),ungroup:m("tabs.ungroup"),update:m("tabs.update"),onActivated:B("tabs.onActivated"),onCreated:B("tabs.onCreated"),onHighlighted:B("tabs.onHighlighted"),onMoved:B("tabs.onMoved"),onRemoved:B("tabs.onRemoved"),onReplaced:B("tabs.onReplaced"),onUpdated:B("tabs.onUpdated"),onZoomChange:B("tabs.onZoomChange")},get videoPaused(){return oe},set videoPaused(i){oe=i,M({type:"video_paused",data:i})},get volume(){return ae},set volume(i){ae=i,M({type:"volume",data:i})},addRoles(i,p,v){if(!I)throw new Error("Admin token not set");return et(i,p,v)},destroy:Oe,disablePrivacyMode:nt,enablePrivacyMode:i=>(i||(i=Pe),rt(i)),ping(){M({type:"ping"})},reconnect(){M({type:"reconnect"})},removeRoles(i,p,v){if(!I)throw new Error("Admin token not set");return tt(i,p,v)},resize(i,p){if(p|=0,!((i|=0)>0&&i<=3840&&p>0&&p<=3840))throw new RangeError("dimensions must be > 0 and <= 3840");if(i*p>he)throw new RangeError(`width * height must be <= hb.maxArea: ${he}`);return Ge(i,p)},sendEvent(i){M(i)},setPermissions(i,p){if(!I)throw new Error("Admin token not set");return Qe(i,p)}};return I!==void 0&&(J.adminToken=I),ae!==1&&(J.volume=ae),oe&&(J.videoPaused=oe),ne&&(J.playoutDelay=ne),J}async function gt(){const e=await fetch("https://region.hyperbeam.com");return e.status!==200?{region:"NA"}:e.json()}export{Ae as FailedToLoadError,wt as OfflineError,$e as SessionTerminatedError,W as TimedOutError,mt as default,gt as getRegionInfo};
